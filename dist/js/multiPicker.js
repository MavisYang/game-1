!function(){var t=window,s=document;function a(t){return s.getElementById(t)}function c(t,e,i){for(var n=t;n<e&&!i(n);n++);}function r(t,e,i){s.addEventListener(t,function(t){e!=t.target.tagName.toLowerCase()&&e!=t.target.className&&e!=t.target.id||i(t)})}function e(t){this.input=t.input,this.container=t.container,this.jsonData=t.jsonData,this.success=t.success,this.ulCount=0,this.ulIdx=0,this.ulDomArr=[],this.idxArr=[],this.jsonArr=[],this.liHeight=50,this.maxHeight=[],this.distance=[],this.start={Y:0,time:""},this.move={Y:0,speed:[]},this.end={Y:0,status:!0},this.resultArr=[],this.initDomFuc(),this.initReady(0,this.jsonData[0]),this.initBinding()}e.prototype={constructor:e,generateArrData:function(e){var i=[];return c(0,e.length,function(t){i.push({id:e[t].id,value:e[t].value})}),i},checkArrDeep:function(t){var e=this;"child"in t&&0<t.child.length&&(e.jsonArr.push(e.generateArrData(t.child)),e.checkArrDeep(t.child[0])),e.idxArr.push(this.ulIdx++)},insertLiArr:function(t,e){var i="",n={id:"-99",value:""};e.unshift(n,n),e.push(n,n),c(0,e.length,function(t){i+='<li data-id="'+e[t].id+'">'+e[t].value+"</li>"}),t.innerHTML=i},initDomFuc:function(){var t=this,e="";e+='<div class="multi-picker-bg" id="multi-picker-bg-'+t.container+'"><div  class="multi-picker-container" id="multi-picker-container-'+t.container+'"><div class="multi-picker-btn-box"><div class="multi-picker-btn" id="multi-picker-btn-cancel">取消</div><div class="multi-picker-btn" id="multi-picker-btn-save-'+t.container+'">确定</div></div><div class="multi-picker-content"><div class="multi-picker-up-shadow"></div><div class="multi-picker-down-shadow"></div><div class="multi-picker-line"></div></div></div></div>',console.log($(t.container),a(t.container)),a(t.container).innerHTML=e,t.jsonArr.push(t.generateArrData(t.jsonData)),console.log(t.jsonData)},initReady:function(t,e){var s=this;this.ulIdx=0,this.idxArr.length=t,s.jsonArr.length=t+1,s.checkArrDeep(e);var r=a("multi-picker-container-"+s.container).children[1];if(c(t+1,s.ulCount<=s.idxArr.length?s.ulCount:s.idxArr.length,function(t){var e=a("multi-picker-"+s.container+"-"+t);s.insertLiArr(e,s.jsonArr[t]),s.distance[t]=0,e.style.transform="translate3d(0, 0, 0)",e.style.webkitTransform="translate3d(0, 0, 0)"}),s.ulCount<=s.idxArr.length)c(s.ulCount,s.idxArr.length,function(t){var e=document.createElement("div");e.setAttribute("class","multi-picker"),e.innerHTML='<ul id="multi-picker-'+s.container+"-"+t+'"></ul>',r.insertBefore(e,r.children[r.children.length-3]);var i=a("multi-picker-"+s.container+"-"+t);s.ulDomArr.push(i),s.distance.push(0),s.insertLiArr(i,s.jsonArr[t]);var n=s.jsonArr[t];i.addEventListener("touchstart",function(){s.touch(event,s,i,n,t)},!1),i.addEventListener("touchmove",function(){s.touch(event,s,i,n,t)},!1),i.addEventListener("touchend",function(){s.touch(event,s,i,n,t)},!1)});else for(var i=s.ulCount-1;i>s.idxArr.length-1;i--){var n=a(s.container).querySelectorAll(".multi-picker")[i];n.parentNode.removeChild(n),s.ulDomArr.pop(),s.distance.pop()}s.maxHeight.length=0,c(s.resultArr.length=0,s.idxArr.length,function(t){a(s.container).querySelectorAll(".multi-picker")[t].style.width=100/s.idxArr.length+"%",s.maxHeight.push(a("multi-picker-"+s.container+"-"+t).offsetHeight),s.resultArr.push({id:s.jsonArr[t][s.distance[t]/s.liHeight+2].id,value:s.jsonArr[t][s.distance[t]/s.liHeight+2].value})}),s.ulCount=s.idxArr.length},initBinding:function(){var t=this,e=a("multi-picker-bg-"+t.container),i=a("multi-picker-container-"+t.container),n=s.body;r("touchstart",t.input,function(){$("#mather_name").blur(),$("#mobile").blur(),$("#address").blur(),$("#detailAddress").blur(),e.classList.add("multi-picker-bg-up"),i.classList.add("multi-picker-container-up"),n.classList.add("multi-picker-locked")}),r("touchstart","multi-picker-btn-save-"+t.container,function(){t.success(t.resultArr),e.classList.remove("multi-picker-bg-up"),i.classList.remove("multi-picker-container-up"),n.classList.remove("multi-picker-locked")}),r("touchstart","multi-picker-bg-"+t.container,function(t){t.preventDefault(),t.stopPropagation(),e.classList.remove("multi-picker-bg-up"),i.classList.remove("multi-picker-container-up"),n.classList.remove("multi-picker-locked")}),r("touchstart","multi-picker-btn-cancel",function(){e.classList.remove("multi-picker-bg-up"),i.classList.remove("multi-picker-container-up"),n.classList.remove("multi-picker-locked"),$(".address_detail_modal").css({display:"none"})}),r("touchstart","address_detail_cancel",function(){e.classList.add("multi-picker-bg-up"),i.classList.add("multi-picker-container-up"),n.classList.add("multi-picker-locked"),$(".address_detail_modal").css({display:"none"})})},checkRange:function(t){var e=this,i=e.jsonData,n=0;c(0,t+1,function(t){n=e.distance[t]/e.liHeight,i=0==t?i[n]:i.child[n]}),e.initReady(t,i)},initPosition:function(t,e,i){var n=(t=e<(t=t<0?0:t)?e:t)%this.liHeight;return n<this.liHeight/2?this.distance[i]=t-n:this.distance[i]=t+(this.liHeight-n),this},initSpeed:function(t,e,i,n){var s=0,r=0,a=0;for(var c in t)r+=t[c]-0;for(var o in t)s+=(t[o]-r/t.length)*(t[o]-r/t.length);.1<(s/t.length).toFixed(2)?(a=i>15*this.liHeight?2*e:0,this.initPosition(this.distance[n]+a,i-5*this.liHeight,n),this.move.speed[0]=.2):(this.initPosition(this.distance[n],i,n),this.move.speed[0]=.2<this.move.speed[0]?.2:this.move.speed[0])},touch:function(t,e,i,n,s){switch((t=t||window.event).preventDefault(),t.type){case"touchstart":e.end.status&&(e.end.status=!e.end.status,t.preventDefault(),e.move.speed=[],e.start.Y=t.touches[0].clientY,e.start.time=Date.now());break;case"touchend":e.end.Y=Math.abs(t.changedTouches[0].clientY);var r=e.distance[s]+(e.start.Y-e.end.Y),a=e.distance[s];e.distance[s]=r<0?0:r<e.maxHeight[s]-5*this.liHeight?r:e.maxHeight[s]-5*this.liHeight,e.initSpeed(e.move.speed,e.start.Y-e.end.Y,e.maxHeight[s],s),i.style.transform="translate3d(0,-"+e.distance[s]+"px, 0)",i.style.webkitTransform="translate3d(0,-"+e.distance[s]+"px, 0)",i.style.transition="transform "+e.move.speed[0]+"s ease-out",i.style.webkitTransition="-webkit-transform "+e.move.speed[0]+"s ease-out",a!=e.distance[s]&&e.checkRange(s),setTimeout(function(){e.end.status=!0},1e3*e.move.speed[0]);break;case"touchmove":t.preventDefault(),e.move.Y=t.touches[0].clientY;var c=e.start.Y-e.move.Y;if(0==e.distance[s]&&c<0?(i.style.transform="translate3d(0,"+1.5*e.liHeight+"px, 0)",i.style.webkitTransform="translate3d(0,"+1.5*e.liHeight+"px, 0)",i.style.transition="transform 0.2s ease-out",i.style.webkitTransition="-webkit-transform 0.2s ease-out"):(i.style.transform="translate3d(0,-"+(c+e.distance[s])+"px, 0)",i.style.webkitTransform="translate3d(0,-"+(c+e.distance[s])+"px, 0)"),Math.abs(c).toFixed(0)%5==0){var o=Date.now();e.move.speed.push((Math.abs(c)/(o-e.start.time)).toFixed(2))}}}},"object"==typeof exports?module.exports=e:"function"==typeof define&&define.amd?define([],function(){return e}):t.MultiPicker=e}();